# Tenstorrent Documentation Cleanup Plan

**Date:** 2025-10-08
**Purpose:** Remove obsolete/deprecated documentation and consolidate current docs
**Status:** Ready for execution

---

## Executive Summary

The `docs/tenstorrent/` directory has accumulated **48 markdown files** over the development of the Tenstorrent backend. Many are now obsolete planning documents, superseded by completed implementation, or duplicates of newer consolidated docs.

**Cleanup scope:**
- **Remove:** 21 obsolete/deprecated docs (44% of total)
- **Keep:** 27 current docs (56% of total)
- **Update:** CLAUDE.md and README.md references

**Benefits:**
- ‚úÖ Clear documentation structure
- ‚úÖ No confusion about current vs. historical status
- ‚úÖ Easier onboarding for new contributors
- ‚úÖ Reduced maintenance burden

---

## Current State Analysis

### Total Files: 48 markdown documents

**Categories:**
1. **Planning docs** (now obsolete): Analysis and task breakdowns completed
2. **Investigation docs** (now obsolete): Research that led to decisions
3. **Status docs** (keep): Active tracking of implementation state
4. **Implementation guides** (keep): How-to and setup documentation
5. **Architecture docs** (keep): Design and specifications
6. **Session summaries** (historical): Keep for reference

---

## Cleanup Actions

### üóëÔ∏è Category 1: Obsolete Planning Documents (DELETE - 7 files)

These were planning/analysis docs that are now superseded by completed implementation (Tasks 1-8 complete, 95/95 tests passing).

| File | Reason | Superseded By |
|------|--------|---------------|
| `IR_LOWERING_ANALYSIS.md` | Analysis doc - IR lowering now complete | `IR_LOWERING_VALIDATION.md` |
| `IR_LOWERING_TASKS.md` | Task list - all tasks complete (PRs #72-79) | `IR_LOWERING_VALIDATION.md` |
| `METALIUM_FIX_PLAN.md` | Old fix plan - superseded by integration plan | `METALIUM_INTEGRATION_PLAN.md` |
| `METALIUM_INTEGRATION_APPROACHES.md` | Investigation - decision made | `EXTERNAL_SDK_IMPLEMENTATION_PLAN.md` |
| `METALIUM_INVESTIGATION_SUMMARY.md` | Investigation summary - approach decided | `EXTERNAL_SDK_IMPLEMENTATION_PLAN.md` |
| `PATTERN_DETECTION_REFACTOR_PLAN.md` | Old refactor plan - pattern detection in Phase 1 | `phases/PHASES_STATUS.md` |
| `TILELANG_TO_TT_EXAMPLES_PLAN.md` | Old examples plan - superseded by 6-phase plan | `phases/PHASES_STATUS.md` |

**Action:** Delete these files - content is historical, decisions already implemented.

---

### üóëÔ∏è Category 2: Obsolete/Duplicate Status Documents (DELETE - 2 files)

| File | Reason | Superseded By |
|------|--------|---------------|
| `EXTERNAL_SDK_STATUS.md` | Old status - merged into unified plan | `EXTERNAL_SDK_IMPLEMENTATION_PLAN.md` |
| `PHASE_STATUS_SUMMARY.md` | Old summary - replaced by detailed status | `phases/PHASES_STATUS.md` |

**Action:** Delete - content is outdated or moved to newer docs.

---

### üóëÔ∏è Category 3: Obsolete CI Documents (CONSOLIDATE - 2 files ‚Üí 1)

| File | Reason | Action |
|------|--------|--------|
| `CI_AND_SCAFFOLDING.md` | Old comprehensive CI doc | Keep core content, merge into CI.md |
| `CI_FLOW_DIAGRAM.md` | Duplicate CI flow info | Merge diagrams into CI.md |

**Action:** Consolidate into single `CI.md` document, delete originals.

---

### üóëÔ∏è Category 4: Detailed Workstream Docs (ARCHIVE - 10 files)

These are detailed design docs for individual workstreams. Now that implementation is complete, we can archive the detailed specs and keep only STATUS files.

**Workstream 1 (4 files) - Keep STATUS only:**
- ‚ùå DELETE: `workstream1/ws1_default_annotation_helper.md`
- ‚ùå DELETE: `workstream1/ws1_engine_adapter.md`
- ‚ùå DELETE: `workstream1/ws1_lower_hook.md`
- ‚ùå DELETE: `workstream1/ws1_target_registration.md`
- ‚ùå DELETE: `workstream1/ws1_target_registration_test.md`
- ‚úÖ KEEP: `workstream1/WS1_STATUS.md`

**Workstream 2 (4 files) - Keep STATUS only:**
- ‚ùå DELETE: `workstream2/README.md`
- ‚ùå DELETE: `workstream2/ws2_python_integration.md`
- ‚ùå DELETE: `workstream2/ws2_schedule_inference.md`
- ‚ùå DELETE: `workstream2/ws2_shard_inference.md`
- ‚úÖ KEEP: `workstream2/WS2_STATUS.md`

**Rationale:** The WS*_STATUS.md files contain the final implementation status and test results. The detailed design docs were planning documents that are no longer needed for reference.

**Action:** Delete detailed design docs (10 files), keep only 6 STATUS files.

---

### ‚úÖ Category 5: Keep - Current Documentation (27 files)

#### **Core Reference Documents (7 files)**

| File | Purpose | Status |
|------|---------|--------|
| `README.md` | Main entry point for TT docs | ‚úÖ Current |
| `UNIFIED_MATMUL_MVP_PLAN.md` | **Authoritative plan** - master reference | ‚úÖ Current |
| `GPU_vs_Tenstorrent.md` | Architecture comparison | ‚úÖ Current |
| `kernel_authoring_comparison.md` | Authoring guide | ‚úÖ Current |
| `TIR_SPECIFICATIONS.md` | TIR extensions for TT | ‚úÖ Current |
| `local_build_guide.md` | Build instructions | ‚úÖ Current |
| `CI.md` (consolidated) | CI/CD documentation | ‚úÖ Current |

#### **Implementation Plans (4 files)**

| File | Purpose | Status |
|------|---------|--------|
| `IR_DRIVEN_CODEGEN_PLAN.md` | Codegen implementation plan (Tasks 1-6) | ‚úÖ Complete (reference) |
| `EXTERNAL_SDK_IMPLEMENTATION_PLAN.md` | External SDK integration plan | ‚úÖ Complete (reference) |
| `METALIUM_INTEGRATION_PLAN.md` | Metalium API integration (Weeks 16-18) | ‚úÖ Complete (reference) |
| `METALIUM_SDK_VALIDATION_PLAN.md` | SDK validation plan (Weeks 19-22) | üöß Active (next phase) |

#### **Setup & Validation (3 files)**

| File | Purpose | Status |
|------|---------|--------|
| `METALIUM_SETUP_GUIDE.md` | SDK installation guide | ‚úÖ Current |
| `METALIUM_API_ANALYSIS.md` | API reference/gaps | ‚úÖ Current |
| `IR_LOWERING_VALIDATION.md` | IR lowering validation results | ‚úÖ Complete (reference) |

#### **Phase Implementation (7 files)**

| File | Purpose | Status |
|------|---------|--------|
| `phases/PHASES_STATUS.md` | Master phase tracking | üöß Active |
| `phases/PHASE1_FOUNDATION_SPEC.md` | Phase 1 specification | üöß Active |
| `phases/PHASE2_OPTIMIZATIONS_SPEC.md` | Phase 2 specification | üöß Active |
| `phases/PHASE3_ADVANCED_SPEC.md` | Phase 3 specification | üöß Active |
| `phases/PHASE4_ATTENTION_SPEC.md` | Phase 4 specification | üöß Active |
| `phases/PHASE5_SPECIALIZED_SPEC.md` | Phase 5 specification | üöß Active |
| `phases/PHASE6_COMPLEX_SPEC.md` | Phase 6 specification | üöß Active |

#### **Workstream Status (6 files)**

| File | Purpose | Status |
|------|---------|--------|
| `workstream1/WS1_STATUS.md` | WS1 implementation status | ‚úÖ Complete |
| `workstream2/WS2_STATUS.md` | WS2 implementation status | ‚úÖ Complete |
| `workstream3/WS3_STATUS.md` | WS3 implementation status | ‚úÖ Complete |
| `workstream4/WS4_STATUS.md` | WS4 implementation status | ‚úÖ Complete |
| `workstream5/WS5_STATUS.md` | WS5 implementation status | ‚úÖ Complete |
| `workstream6/WS6_STATUS.md` | WS6 implementation status | ‚úÖ Complete |

#### **Codegen Specs & Current Work (3 files)**

| File | Purpose | Status |
|------|---------|--------|
| `codegen/DST_DOUBLE_BUFFERING_SPEC.md` | DST lifecycle specification | ‚úÖ Current |
| `CODEGEN_FIX_PLAN.md` | **NEW** - Codegen fix plan | üöß Active |
| `SESSION_SUMMARY_2025-10-08.md` | Session summary (today) | ‚úÖ Current |

---

## File Deletion List

### Total to delete: 21 files

```bash
# Planning docs (7 files)
docs/tenstorrent/IR_LOWERING_ANALYSIS.md
docs/tenstorrent/IR_LOWERING_TASKS.md
docs/tenstorrent/METALIUM_FIX_PLAN.md
docs/tenstorrent/METALIUM_INTEGRATION_APPROACHES.md
docs/tenstorrent/METALIUM_INVESTIGATION_SUMMARY.md
docs/tenstorrent/PATTERN_DETECTION_REFACTOR_PLAN.md
docs/tenstorrent/TILELANG_TO_TT_EXAMPLES_PLAN.md

# Obsolete status (2 files)
docs/tenstorrent/EXTERNAL_SDK_STATUS.md
docs/tenstorrent/PHASE_STATUS_SUMMARY.md

# CI duplicates (2 files - after consolidation)
docs/tenstorrent/CI_AND_SCAFFOLDING.md
docs/tenstorrent/CI_FLOW_DIAGRAM.md

# Workstream detailed design docs (10 files)
docs/tenstorrent/workstream1/ws1_default_annotation_helper.md
docs/tenstorrent/workstream1/ws1_engine_adapter.md
docs/tenstorrent/workstream1/ws1_lower_hook.md
docs/tenstorrent/workstream1/ws1_target_registration.md
docs/tenstorrent/workstream1/ws1_target_registration_test.md
docs/tenstorrent/workstream2/README.md
docs/tenstorrent/workstream2/ws2_python_integration.md
docs/tenstorrent/workstream2/ws2_schedule_inference.md
docs/tenstorrent/workstream2/ws2_shard_inference.md
```

---

## Consolidation Actions

### 1. Consolidate CI Documentation

**Create new consolidated `CI.md`:**
```markdown
# Tenstorrent Backend CI/CD

[Keep current CI.md content]

## CI Flow Diagram
[Merge content from CI_FLOW_DIAGRAM.md]

## Scaffolding and Setup
[Merge relevant content from CI_AND_SCAFFOLDING.md]
```

**Then delete:**
- `CI_AND_SCAFFOLDING.md`
- `CI_FLOW_DIAGRAM.md`

---

## Documentation Structure After Cleanup

```
docs/tenstorrent/
‚îú‚îÄ‚îÄ README.md                                  # Main entry point
‚îú‚îÄ‚îÄ UNIFIED_MATMUL_MVP_PLAN.md                # ‚≠ê Authoritative plan
‚îÇ
‚îú‚îÄ‚îÄ Architecture & Design
‚îÇ   ‚îú‚îÄ‚îÄ GPU_vs_Tenstorrent.md                # Architecture comparison
‚îÇ   ‚îú‚îÄ‚îÄ kernel_authoring_comparison.md        # Authoring guide
‚îÇ   ‚îî‚îÄ‚îÄ TIR_SPECIFICATIONS.md                 # TIR extensions
‚îÇ
‚îú‚îÄ‚îÄ Setup & Validation
‚îÇ   ‚îú‚îÄ‚îÄ local_build_guide.md                  # Build instructions
‚îÇ   ‚îú‚îÄ‚îÄ CI.md                                 # CI/CD documentation
‚îÇ   ‚îú‚îÄ‚îÄ METALIUM_SETUP_GUIDE.md              # SDK installation
‚îÇ   ‚îú‚îÄ‚îÄ METALIUM_API_ANALYSIS.md             # API reference
‚îÇ   ‚îî‚îÄ‚îÄ IR_LOWERING_VALIDATION.md            # Validation results
‚îÇ
‚îú‚îÄ‚îÄ Implementation Plans (Reference)
‚îÇ   ‚îú‚îÄ‚îÄ IR_DRIVEN_CODEGEN_PLAN.md            # Codegen plan (complete)
‚îÇ   ‚îú‚îÄ‚îÄ EXTERNAL_SDK_IMPLEMENTATION_PLAN.md  # SDK integration (complete)
‚îÇ   ‚îú‚îÄ‚îÄ METALIUM_INTEGRATION_PLAN.md         # Metalium API (complete)
‚îÇ   ‚îú‚îÄ‚îÄ METALIUM_SDK_VALIDATION_PLAN.md      # SDK validation (next)
‚îÇ   ‚îî‚îÄ‚îÄ CODEGEN_FIX_PLAN.md                  # Current work (active)
‚îÇ
‚îú‚îÄ‚îÄ Workstream Status
‚îÇ   ‚îú‚îÄ‚îÄ workstream1/WS1_STATUS.md            # Target registration ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ workstream2/WS2_STATUS.md            # Metadata inference ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ workstream3/WS3_STATUS.md            # TIR transforms ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ workstream4/WS4_STATUS.md            # Compute codegen ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ workstream5/WS5_STATUS.md            # Reader/Writer codegen ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ workstream6/WS6_STATUS.md            # Host program ‚úÖ
‚îÇ
‚îú‚îÄ‚îÄ Phase Implementation (Active)
‚îÇ   ‚îú‚îÄ‚îÄ phases/PHASES_STATUS.md              # Master tracking üöß
‚îÇ   ‚îú‚îÄ‚îÄ phases/PHASE1_FOUNDATION_SPEC.md     # Phase 1 (37% complete)
‚îÇ   ‚îú‚îÄ‚îÄ phases/PHASE2_OPTIMIZATIONS_SPEC.md  # Phase 2 (planned)
‚îÇ   ‚îú‚îÄ‚îÄ phases/PHASE3_ADVANCED_SPEC.md       # Phase 3 (planned)
‚îÇ   ‚îú‚îÄ‚îÄ phases/PHASE4_ATTENTION_SPEC.md      # Phase 4 (planned)
‚îÇ   ‚îú‚îÄ‚îÄ phases/PHASE5_SPECIALIZED_SPEC.md    # Phase 5 (planned)
‚îÇ   ‚îî‚îÄ‚îÄ phases/PHASE6_COMPLEX_SPEC.md        # Phase 6 (planned)
‚îÇ
‚îú‚îÄ‚îÄ Codegen Specifications
‚îÇ   ‚îî‚îÄ‚îÄ codegen/DST_DOUBLE_BUFFERING_SPEC.md # DST lifecycle
‚îÇ
‚îî‚îÄ‚îÄ Session Summaries
    ‚îî‚îÄ‚îÄ SESSION_SUMMARY_2025-10-08.md        # Today's work
```

**Total after cleanup: 27 files** (down from 48)

---

## Updates Required

### 1. Update CLAUDE.md

Remove references to deleted docs:
- ‚ùå Remove: IR_LOWERING_TASKS.md reference
- ‚ùå Remove: Detailed workstream doc references
- ‚úÖ Keep: All current doc references

### 2. Update README.md

Update documentation index:
- Remove deleted file references
- Add new consolidated structure
- Update "Where to Start" section

### 3. Update Workstream STATUS Files

Remove references to detailed design docs:
- `workstream1/WS1_STATUS.md` - remove links to ws1_*.md files
- `workstream2/WS2_STATUS.md` - remove links to ws2_*.md files

---

## Implementation Plan

### Phase 1: Consolidate CI Docs (30 minutes)

1. Read current `CI.md`
2. Extract relevant content from `CI_AND_SCAFFOLDING.md`
3. Extract diagrams from `CI_FLOW_DIAGRAM.md`
4. Create new consolidated `CI.md`
5. Verify no information loss

### Phase 2: Delete Obsolete Files (10 minutes)

Execute deletion commands:
```bash
cd /home/ubuntu/code/tilelang-tt

# Remove planning docs
rm docs/tenstorrent/IR_LOWERING_ANALYSIS.md
rm docs/tenstorrent/IR_LOWERING_TASKS.md
rm docs/tenstorrent/METALIUM_FIX_PLAN.md
rm docs/tenstorrent/METALIUM_INTEGRATION_APPROACHES.md
rm docs/tenstorrent/METALIUM_INVESTIGATION_SUMMARY.md
rm docs/tenstorrent/PATTERN_DETECTION_REFACTOR_PLAN.md
rm docs/tenstorrent/TILELANG_TO_TT_EXAMPLES_PLAN.md

# Remove obsolete status
rm docs/tenstorrent/EXTERNAL_SDK_STATUS.md
rm docs/tenstorrent/PHASE_STATUS_SUMMARY.md

# Remove CI duplicates
rm docs/tenstorrent/CI_AND_SCAFFOLDING.md
rm docs/tenstorrent/CI_FLOW_DIAGRAM.md

# Remove workstream design docs
rm docs/tenstorrent/workstream1/ws1_*.md
rm docs/tenstorrent/workstream2/ws2_*.md
rm docs/tenstorrent/workstream2/README.md
```

### Phase 3: Update References (30 minutes)

1. Update CLAUDE.md (remove obsolete refs)
2. Update README.md (new doc structure)
3. Update WS1_STATUS.md (remove design doc links)
4. Update WS2_STATUS.md (remove design doc links)

### Phase 4: Verification (15 minutes)

1. Check no broken links in remaining docs
2. Verify all references in CLAUDE.md are valid
3. Test documentation builds (if applicable)
4. Review final structure

### Phase 5: Create PR (15 minutes)

1. Commit all changes
2. Create comprehensive PR description
3. List all deleted files
4. Explain rationale

**Total time: ~2 hours**

---

## PR Description Template

```markdown
## Documentation Cleanup: Remove 21 Obsolete Files

**Summary:** Clean up `docs/tenstorrent/` directory by removing obsolete planning documents, consolidating CI docs, and streamlining workstream documentation.

**Changes:**
- üóëÔ∏è Deleted 21 obsolete/deprecated files (44% reduction)
- üìù Consolidated 3 CI documents into 1
- ‚úÖ Kept 27 current/active documents
- üîó Updated references in CLAUDE.md and README.md

**Files Deleted (21 total):**

Planning docs (obsolete):
- IR_LOWERING_ANALYSIS.md - Superseded by IR_LOWERING_VALIDATION.md
- IR_LOWERING_TASKS.md - All tasks complete (PRs #72-79)
- METALIUM_FIX_PLAN.md - Superseded by METALIUM_INTEGRATION_PLAN.md
- METALIUM_INTEGRATION_APPROACHES.md - Decision made and implemented
- METALIUM_INVESTIGATION_SUMMARY.md - Investigation complete
- PATTERN_DETECTION_REFACTOR_PLAN.md - Merged into phases
- TILELANG_TO_TT_EXAMPLES_PLAN.md - Superseded by 6-phase plan

Status docs (obsolete):
- EXTERNAL_SDK_STATUS.md - Merged into EXTERNAL_SDK_IMPLEMENTATION_PLAN.md
- PHASE_STATUS_SUMMARY.md - Superseded by phases/PHASES_STATUS.md

CI docs (consolidated):
- CI_AND_SCAFFOLDING.md - Merged into CI.md
- CI_FLOW_DIAGRAM.md - Merged into CI.md

Workstream design docs (10 files):
- workstream1/ws1_*.md (5 files) - Keep WS1_STATUS.md only
- workstream2/ws2_*.md + README.md (5 files) - Keep WS2_STATUS.md only

**Rationale:**
- IR lowering is complete (95/95 tests passing)
- Planning documents served their purpose
- Detailed design docs archived (keep STATUS only)
- Cleaner structure for new contributors

**Verification:**
- ‚úÖ No broken links in remaining docs
- ‚úÖ CLAUDE.md references updated
- ‚úÖ README.md structure updated
- ‚úÖ All tests still pass (no code changes)

**Documentation structure after cleanup:**
- 7 core reference docs
- 4 implementation plans
- 3 setup/validation guides
- 7 phase specifications (active)
- 6 workstream status files
- 1 codegen spec
- 1 session summary

**Before:** 48 files
**After:** 27 files (44% reduction)
```

---

## Success Criteria

- ‚úÖ 21 obsolete files deleted
- ‚úÖ CI docs consolidated into single file
- ‚úÖ No broken links in remaining documentation
- ‚úÖ CLAUDE.md references all valid
- ‚úÖ Clear documentation structure
- ‚úÖ All tests still pass (95/95)
- ‚úÖ PR merged successfully

---

## Timeline

**Total estimated time:** 2 hours

**Breakdown:**
- Phase 1 (Consolidate CI): 30 min
- Phase 2 (Delete files): 10 min
- Phase 3 (Update refs): 30 min
- Phase 4 (Verification): 15 min
- Phase 5 (Create PR): 15 min
- Buffer: 20 min

**Can be completed in single session.**

---

**Status:** Ready for execution
**Next step:** Begin Phase 1 (CI consolidation)
